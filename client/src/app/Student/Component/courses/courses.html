<div class="container py-5">
  <h2 class="text-center text-success fw-bold mb-4 border-bottom d-inline-block pb-2">
    Our Courses
  </h2>

  <div class="row">
    <div class="col-md-3 mb-4">
      <div class="bg-white shadow rounded-4 p-3">
        <h5 class="mb-3">Filters</h5>

        <form [formGroup]="filterForm" (ngSubmit)="applyFilters()">
          <div class="mb-3">
            <label class="form-label fw-bold">Category</label>
            <input
              type="text"
              class="form-control"
              formControlName="category"
              placeholder="Category"
            />
          </div>

          <div class="mb-3">
            <label class="form-label fw-bold">Language</label>
            <input
              type="text"
              class="form-control"
              formControlName="language"
              placeholder="Language"
            />
          </div>

          <div class="mb-3">
            <label class="form-label fw-bold">Rating</label>
            <input
              type="number"
              class="form-control"
              formControlName="rating"
              min="0"
              max="5"
              placeholder="Minimum rating"
            />
          </div>

          <div class="mb-3">
            <label class="form-label fw-bold">Price</label>
            <select class="form-select mb-2" formControlName="priceType">
              <option value="">All</option>
              <option value="free">Free</option>
              <option value="paid">Paid</option>
            </select>

            <input
              type="number"
              class="form-control"
              formControlName="maxPrice"
              placeholder="Max price"
              min="0"
              [disabled]="filterForm.get('priceType')?.value !== 'paid'"
            />
          </div>

          <button type="submit" class="btn btn-primary w-100 mb-2">Apply Filters</button>
          <button type="button" class="btn btn-secondary w-100" (click)="resetFilters()">Reset</button>
        </form>
      </div>
    </div>

    <div class="col-md-9">
      <div class="row g-4">
        @for (course of filteredCourses; track course.id) {
          <div class="col-md-6 col-lg-4 mb-4">
            <div class="card shadow-sm h-100">
              <img [src]="course.image" class="card-img-top" alt="{{ course.title }}" />
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ course.title }}</h5>
                <p class="card-text text-muted mb-1">
                  {{ course.category }} | {{ course.language }}
                </p>
                <p class="card-text fw-bold mb-1">
                  {{ course.price === 0 ? 'Free' : '$' + course.price }}
                </p>

                <p class="mb-2">
                  @for (i of [0,1,2,3,4]; track i) {
                    <i
                      class="fas fa-star"
                      [class.text-warning]="i < course.rating"
                      [class.text-muted]="i >= course.rating"
                    ></i>
                  }
                </p>

                <button class="btn btn-success mt-auto">Enroll Now</button>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</div>